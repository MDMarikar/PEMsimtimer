<!DOCTYPE html>
<html>

<head>
  <!-- Include meta tag to ensure proper rendering and touch zooming -->
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <!-- Include jQuery Mobile stylesheets -->
  <link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css">
  <!-- Include the jQuery library -->
  <script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
  <!-- Include the jQuery Mobile library -->
  <script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
  <!-- timecircles -->
  <link rel="stylesheet" href="https://storage.googleapis.com/simfeedback/resources/timecircles/TimeCircles.css">
  <script src="https://storage.googleapis.com/simfeedback/resources/timecircles/TimeCircles.js"></script>

  <script src="https://code.highcharts.com/stock/highstock.js"></script>


  <script src="https://code.highcharts.com/highcharts-more.js"></script>
  <script src="https://code.highcharts.com/modules/exporting.js"></script>


  <style>
  
   
    label {
      font-weight: bold;
    }
    
    body {
      font-size: 80%;
      
    }
    
    h2
    {
      
      color: red;
    }
    
    h3
    {
      
      color: orange;
    }
    
    div {
      cursor: pointer;
    }
    
    .simtimer {
      background: purple;
      width: 200px;
      height: 80px;
    }
    
    .inlineinput div {
      display: inline;
    }
    
    table,
    td,
    th {
      border: 1px solid black;
      text-align: center;
      background: grey;
    }
    
    table {
      table-layout: auto;
      border-collapse: collapse;
      width: 80%;
    }
    
    th {
      text-align: center;
    }
  </style>

  <script>
    $(document).ready(function() {
      
     

      $(":input").val(0);
      var simtimer = getTimecircle();
      var hashtag = "#";
      var resettstr = "R";



      $("#start").click(function() {

        simtimer.start();



      });

      $("#pause").click(function() {
        simtimer.stop();

      });


      $("#reset").click(function() {
       // $(":input").val(0);
        

        
        simtimer.restart();
        
        //location.restart();

      });

      setupSetup();

      $('a').click(function(e) {


        if (e.target.id == "graphing") {



          graphprep();
          return;


        }

        if (e.target.id == "returnToSim") {



          try {


        
            

            $("#KPLabelling").text("Main Problem: " + $("#KPSetup").val());
            $("#KTLabelling").text("Definitive Treatment: " + $("#KTSetup").val());


            $("#AirWayLabelling").text($("#AirWaySetup").val());
            $("#BLabelling").text($("#BSetup").val());
            $("#CLabelling").text($("#CSetup").val());
            $("#DLabelling").text($("#DSetup").val());
            $("#ELabelling").text($("#ESetup").val());

          } catch (err) {
            alert(err);
          }


          return;
        }





        var t = simtimer.getTime();
        t = Math.round(Math.abs(t));
        var secs = t % 60;
        var mins = Math.floor(t / 60);

        var target = $(e.target);
        var resetting = target.attr('id').includes('R');

        var inputelement = hashtag + target.attr('id');
        if (resetting) {
          inputelement = inputelement.substring(0, inputelement.length - 1);
        }

        var inputsecs = inputelement + "secsInput";
        var inputmins = inputelement + "minsInput";


        if (resetting) {



          $(inputsecs).val(0);
          $(inputmins).val(0);

        } else {

          $(inputsecs).val(secs);
          $(inputmins).val(mins);


        }

      });

    });

    function getTimecircle() {

      return $(".simtimer").TimeCircles({
        start: false,
        time: {
          Days: {
            color: "#C0C8CF",
            show: false
          },
          Hours: {
            color: "#C0C8CF",
            show: false
          },
          Minutes: {
            color: "#C0C8CF"
          },
          Seconds: {
            color: "#C0C8CF"
          }
        }

      });
    }


    function setupSetup() {

      $('#AirWaySetup').val("Airway Event");
      $('#BSetup').val("Breathing Event");
      $('#CSetup').val("Circulation Event");
      $('#DSetup').val("Disability Event");
      $('#ESetup').val("Exposure Event");
      $('#KPSetup').val("Key Problem");
      $('#KTSetup').val("Definitive Treatment");


    }
  </script>



</head>

<body>

  <div data-role="page" id="pageone" data-theme="b">






    <div data-role="header" data-position="fixed">
      <div class=simtimer style="width: 100%" data-timer="0"></div>
      <div data-role="controlgroup" data-type="horizontal" class="timercontrol">
        <input type="button" id="start" value="start">
        <input type="button" id="pause" value="pause">
        <input type="button" id="reset" value="reset">
        <a href="#pagetwo" class="ui-btn" id="graphing">graph</a>
        <a href="#setUpMenu" class="ui-btn" id="setup">setup</a>


      </div>
    </div>

    <div data-role="main" class="ui-content" >
      <h2>A</h2>
      <h3 id="AirWayLabelling">Airway Task</h3>


      <table data-role="table" class="ui-responsive">
        <thead>
          <tr>
            <th>Occured
              <a href="#" id="A1timemarkI" class="ui-btn ui-btn-inline ui-shadow ui-corner-all ui-icon-carat-r ui-btn-icon-notext">Plus</a>
              <a href="#" id="A1timemarkIR" class="ui-btn ui-btn-inline ui-shadow ui-corner-all ui-icon-delete ui-btn-icon-notext">Minus</a>
            </th>

            <th>Identified
              <a href="#" id="A1timemarkO" class="ui-btn ui-btn-inline ui-shadow ui-corner-all ui-icon-carat-r ui-btn-icon-notext">Plus</a>
              <a href="#" id="A1timemarkOR" class="ui-btn ui-btn-inline ui-shadow ui-corner-all ui-icon-delete ui-btn-icon-notext">Minus</a>
            </th>

            <th>Treated
              <a href="#" id="A1timemarkT" class="ui-btn ui-btn-inline ui-shadow ui-corner-all ui-icon-carat-r ui-btn-icon-notext">Plus</a>
              <a href="#" id="A1timemarkTR" class="ui-btn ui-btn-inline ui-shadow ui-corner-all ui-icon-delete ui-btn-icon-notext">Minus</a>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>

              <div>
                <span class="inlineinput">
                <input type='number' id="A1timemarkIminsInput" max="60" maxlength="2" align="left"  style='display: inline; width: 50px;' />min
              </span>

                <span class="inlineinput">
                <input type='number' id="A1timemarkIsecsInput" max="60" maxlength="2" align="left" style='display: inline; width: 50px;' />sec
              </span>

              </div>
            </td>
            <td>
              <div>
                <span class="inlineinput">
            <input type='number' id="A1timemarkOminsInput" max="60" maxlength="2"  style='display: inline; width: 50px;' />min
            </span>

                <span class="inlineinput">
            <input type='number' id="A1timemarkOsecsInput" max="60" maxlength="2"  style='display: inline; width: 50px;' />sec
            </span>
              </div>
            </td>

            <td>
              <div>
                <span class="inlineinput">
          <input type='number' id="A1timemarkTminsInput" max="60" maxlength="2"  style='display: inline; width: 50px;' />min
          </span>

                <span class="inlineinput">
          <input type='number' id="A1timemarkTsecsInput" max="60" maxlength="2"  style='display: inline; width: 50px;' />sec
          </span>
              </div>

            </td>
          </tr>

        </tbody>
      </table>

      <!-- B Task -->
      <h2>B</h2>
      <h3 id="BLabelling">Breathing Task</h3>

      <table data-role="table" class="ui-responsive">
        <thead>
          <tr>
            <th>Occured
              <a href="#" id="B1timemarkI" class="ui-btn ui-btn-inline ui-shadow ui-corner-all ui-icon-carat-r ui-btn-icon-notext">Plus</a>
              <a href="#" id="B1timemarkIR" class="ui-btn ui-btn-inline ui-shadow ui-corner-all ui-icon-delete ui-btn-icon-notext">Minus</a>
            </th>

            <th>Identified
              <a href="#" id="B1timemarkO" class="ui-btn ui-btn-inline ui-shadow ui-corner-all ui-icon-carat-r ui-btn-icon-notext">Plus</a>
              <a href="#" id="B1timemarkOR" class="ui-btn ui-btn-inline ui-shadow ui-corner-all ui-icon-delete ui-btn-icon-notext">Minus</a>
            </th>

            <th>Treated
              <a href="#" id="B1timemarkT" class="ui-btn ui-btn-inline ui-shadow ui-corner-all ui-icon-carat-r ui-btn-icon-notext">Plus</a>
              <a href="#" id="B1timemarkTR" class="ui-btn ui-btn-inline ui-shadow ui-corner-all ui-icon-delete ui-btn-icon-notext">Minus</a>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>

              <div>
                <span class="inlineinput">
                <input type='number' id="B1timemarkIminsInput" max="60" maxlength="2" align="left"  style='display: inline; width: 50px;' />min
              </span>

                <span class="inlineinput">
                <input type='number' id="B1timemarkIsecsInput" max="60" maxlength="2" align="left" style='display: inline; width: 50px;' />sec
              </span>

              </div>
            </td>
            <td>
              <div>
                <span class="inlineinput">
            <input type='number' id="B1timemarkOminsInput" max="60" maxlength="2"  style='display: inline; width: 50px;' />min
            </span>

                <span class="inlineinput">
            <input type='number' id="B1timemarkOsecsInput" max="60" maxlength="2"  style='display: inline; width: 50px;' />sec
            </span>
              </div>
            </td>

            <td>
              <div>
                <span class="inlineinput">
          <input type='number' id="B1timemarkTminsInput" max="60" maxlength="2"  style='display: inline; width: 50px;' />min
          </span>

                <span class="inlineinput">
          <input type='number' id="B1timemarkTsecsInput" max="60" maxlength="2"  style='display: inline; width: 50px;' />sec
          </span>
              </div>

            </td>
          </tr>

        </tbody>
      </table>

      <!-- C Task -->
      <h2>C</h2>
      <h3 id="CLabelling">Circulation Task</h3>

      <table data-role="table" class="ui-responsive">
        <thead>
          <tr>
            <th>Occured
              <a href="#" id="C1timemarkI" class="ui-btn ui-btn-inline ui-shadow ui-corner-all ui-icon-carat-r ui-btn-icon-notext">Plus</a>
              <a href="#" id="C1timemarkIR" class="ui-btn ui-btn-inline ui-shadow ui-corner-all ui-icon-delete ui-btn-icon-notext">Minus</a>
            </th>

            <th>Identified
              <a href="#" id="C1timemarkO" class="ui-btn ui-btn-inline ui-shadow ui-corner-all ui-icon-carat-r ui-btn-icon-notext">Plus</a>
              <a href="#" id="C1timemarkOR" class="ui-btn ui-btn-inline ui-shadow ui-corner-all ui-icon-delete ui-btn-icon-notext">Minus</a>
            </th>

            <th>Treated
              <a href="#" id="C1timemarkT" class="ui-btn ui-btn-inline ui-shadow ui-corner-all ui-icon-carat-r ui-btn-icon-notext">Plus</a>
              <a href="#" id="C1timemarkTR" class="ui-btn ui-btn-inline ui-shadow ui-corner-all ui-icon-delete ui-btn-icon-notext">Minus</a>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>

              <div>
                <span class="inlineinput">
                <input type='number' id="C1timemarkIminsInput" max="60" maxlength="2" align="left"  style='display: inline; width: 50px;' />min
              </span>

                <span class="inlineinput">
                <input type='number' id="C1timemarkIsecsInput" max="60" maxlength="2" align="left" style='display: inline; width: 50px;' />sec
              </span>

              </div>
            </td>
            <td>
              <div>
                <span class="inlineinput">
            <input type='number' id="C1timemarkOminsInput" max="60" maxlength="2"  style='display: inline; width: 50px;' />min
            </span>

                <span class="inlineinput">
            <input type='number' id="C1timemarkOsecsInput" max="60" maxlength="2"  style='display: inline; width: 50px;' />sec
            </span>
              </div>
            </td>

            <td>
              <div>
                <span class="inlineinput">
          <input type='number' id="C1timemarkTminsInput" max="60" maxlength="2"  style='display: inline; width: 50px;' />min
          </span>

                <span class="inlineinput">
          <input type='number' id="C1timemarkTsecsInput" max="60" maxlength="2"  style='display: inline; width: 50px;' />sec
          </span>
              </div>

            </td>
          </tr>

        </tbody>
      </table>
      
      <!-- D Task -->
      <h2>D</h2>
      <h3 id="DLabelling">Disability Task</h3>


      <table data-role="table" class="ui-responsive">
        <thead>
          <tr>
            <th>Occured
              <a href="#" id="D1timemarkI" class="ui-btn ui-btn-inline ui-shadow ui-corner-all ui-icon-carat-r ui-btn-icon-notext">Plus</a>
              <a href="#" id="D1timemarkIR" class="ui-btn ui-btn-inline ui-shadow ui-corner-all ui-icon-delete ui-btn-icon-notext">Minus</a>
            </th>

            <th>Identified
              <a href="#" id="D1timemarkO" class="ui-btn ui-btn-inline ui-shadow ui-corner-all ui-icon-carat-r ui-btn-icon-notext">Plus</a>
              <a href="#" id="D1timemarkOR" class="ui-btn ui-btn-inline ui-shadow ui-corner-all ui-icon-delete ui-btn-icon-notext">Minus</a>
            </th>

            <th>Treated
              <a href="#" id="D1timemarkT" class="ui-btn ui-btn-inline ui-shadow ui-corner-all ui-icon-carat-r ui-btn-icon-notext">Plus</a>
              <a href="#" id="D1timemarkTR" class="ui-btn ui-btn-inline ui-shadow ui-corner-all ui-icon-delete ui-btn-icon-notext">Minus</a>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>

              <div>
                <span class="inlineinput">
                <input type='number' id="D1timemarkIminsInput" max="60" maxlength="2" align="left"  style='display: inline; width: 50px;' />min
              </span>

                <span class="inlineinput">
                <input type='number' id="D1timemarkIsecsInput" max="60" maxlength="2" align="left" style='display: inline; width: 50px;' />sec
              </span>

              </div>
            </td>
            <td>
              <div>
                <span class="inlineinput">
            <input type='number' id="D1timemarkOminsInput" max="60" maxlength="2"  style='display: inline; width: 50px;' />min
            </span>

                <span class="inlineinput">
            <input type='number' id="D1timemarkOsecsInput" max="60" maxlength="2"  style='display: inline; width: 50px;' />sec
            </span>
              </div>
            </td>

            <td>
              <div>
                <span class="inlineinput">
          <input type='number' id="D1timemarkTminsInput" max="60" maxlength="2"  style='display: inline; width: 50px;' />min
          </span>

                <span class="inlineinput">
          <input type='number' id="D1timemarkTsecsInput" max="60" maxlength="2"  style='display: inline; width: 50px;' />sec
          </span>
              </div>

            </td>
          </tr>

        </tbody>
      </table>

      <!-- E Task -->
      <h2>E</h2>
      <h3 id="ELabelling">Exposure Task</h3>

      <table data-role="table" class="ui-responsive">
        <thead>
          <tr>
            <th>Occured
              <a href="#" id="E1timemarkI" class="ui-btn ui-btn-inline ui-shadow ui-corner-all ui-icon-carat-r ui-btn-icon-notext">Plus</a>
              <a href="#" id="E1timemarkIR" class="ui-btn ui-btn-inline ui-shadow ui-corner-all ui-icon-delete ui-btn-icon-notext">Minus</a>
            </th>

            <th>Identified
              <a href="#" id="E1timemarkO" class="ui-btn ui-btn-inline ui-shadow ui-corner-all ui-icon-carat-r ui-btn-icon-notext">Plus</a>
              <a href="#" id="E1timemarkOR" class="ui-btn ui-btn-inline ui-shadow ui-corner-all ui-icon-delete ui-btn-icon-notext">Minus</a>
            </th>

            <th>Treated
              <a href="#" id="E1timemarkT" class="ui-btn ui-btn-inline ui-shadow ui-corner-all ui-icon-carat-r ui-btn-icon-notext">Plus</a>
              <a href="#" id="E1timemarkTR" class="ui-btn ui-btn-inline ui-shadow ui-corner-all ui-icon-delete ui-btn-icon-notext">Minus</a>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>

              <div>
                <span class="inlineinput">
                <input type='number' id="E1timemarkIminsInput" max="60" maxlength="2" align="left"  style='display: inline; width: 50px;' />min
              </span>

                <span class="inlineinput">
                <input type='number' id="E1timemarkIsecsInput" max="60" maxlength="2" align="left" style='display: inline; width: 50px;' />sec
              </span>

              </div>
            </td>
            <td>
              <div>
                <span class="inlineinput">
            <input type='number' id="E1timemarkOminsInput" max="60" maxlength="2"  style='display: inline; width: 50px;' />min
            </span>

                <span class="inlineinput">
            <input type='number' id="E1timemarkOsecsInput" max="60" maxlength="2"  style='display: inline; width: 50px;' />sec
            </span>
              </div>
            </td>

            <td>
              <div>
                <span class="inlineinput">
          <input type='number' id="E1timemarkTminsInput" max="60" maxlength="2"  style='display: inline; width: 50px;' />min
          </span>

                <span class="inlineinput">
          <input type='number' id="E1timemarkTsecsInput" max="60" maxlength="2"  style='display: inline; width: 50px;' />sec
          </span>
              </div>

            </td>
          </tr>

        </tbody>
      </table>

      <!-- Key Moments Task -->
      <h2>Key Moments</h2>
      <h3 id="KPLabelling">Main Problem</h3>
      <h3 id="KTLabelling">Definitive Treatment</h3>



      <table data-role="table" class="ui-responsive">
        <thead>
          <tr>


            <th>Main Problem Identified

              <a href="#" id="K1timemarkI" class="ui-btn ui-btn-inline ui-shadow ui-corner-all ui-icon-carat-r ui-btn-icon-notext">Plus</a>
              <a href="#" id="K1timemarkIR" class="ui-btn ui-btn-inline ui-shadow ui-corner-all ui-icon-delete ui-btn-icon-notext">Minus</a>
            </th>

            <th>Definitive Treatment

              <a href="#" id="K1timemarkT" class="ui-btn ui-btn-inline ui-shadow ui-corner-all ui-icon-carat-r ui-btn-icon-notext">Plus</a>
              <a href="#" id="K1timemarkTR" class="ui-btn ui-btn-inline ui-shadow ui-corner-all ui-icon-delete ui-btn-icon-notext">Minus</a>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>
              <div>
                <span class="inlineinput">
            <input type='number' id="K1timemarkIminsInput" max="60" maxlength="2"  style='display: inline; width: 50px;' />min
            </span>

                <span class="inlineinput">
            <input type='number' id="K1timemarkIsecsInput" max="60" maxlength="2"  style='display: inline; width: 50px;' />sec
            </span>
              </div>
            </td>

            <td>
              <div>
                <span class="inlineinput">
          <input type='number' id="K1timemarkTminsInput" max="60" maxlength="2"  style='display: inline; width: 50px;' />min
          </span>

                <span class="inlineinput">
          <input type='number' id="K1timemarkTsecsInput" max="60" maxlength="2"  style='display: inline; width: 50px;' />sec
          </span>
              </div>

            </td>
          </tr>

        </tbody>
      </table>




    </div>




  </div>

  <div data-role="page" id="pagetwo" data-theme="b">



    <script>
      function gettimevalue(minval, secval) {


        if ((minval == null) && (secval == null)) {
          return null;
        }

        var x = parseInt(minval, 10) * 60 + parseInt(secval, 10);
        console.log(minval + ":" + secval + ":" + x);


        return x;

      }

      function gettimevaluepermitnull(minval, secval) {


        if ((minval == 0) && (secval == 0)) {
          return null;
        }

        var x = parseInt(minval, 10) * 60 + parseInt(secval, 10);
        console.log(minval + ":" + secval + ":" + x);


        return x;

      }

      function findmaxtimeval() {

        var x = Math.max(


          gettimevalue(document.getElementById("A1timemarkIminsInput").value, document.getElementById("A1timemarkIsecsInput").value),
          gettimevalue(document.getElementById("A1timemarkOminsInput").value, document.getElementById("A1timemarkOsecsInput").value),
          gettimevalue(document.getElementById("B1timemarkIminsInput").value, document.getElementById("B1timemarkIsecsInput").value),
          gettimevalue(document.getElementById("B1timemarkOminsInput").value, document.getElementById("B1timemarkOsecsInput").value),
          gettimevalue(document.getElementById("C1timemarkIminsInput").value, document.getElementById("C1timemarkIsecsInput").value),
          gettimevalue(document.getElementById("C1timemarkOminsInput").value, document.getElementById("C1timemarkOsecsInput").value),
          gettimevalue(document.getElementById("D1timemarkIminsInput").value, document.getElementById("D1timemarkIsecsInput").value),
          gettimevalue(document.getElementById("D1timemarkOminsInput").value, document.getElementById("D1timemarkOsecsInput").value),
          gettimevalue(document.getElementById("E1timemarkIminsInput").value, document.getElementById("E1timemarkIsecsInput").value),
          gettimevalue(document.getElementById("E1timemarkOminsInput").value, document.getElementById("E1timemarkOsecsInput").value),
          gettimevalue(document.getElementById("A1timemarkTminsInput").value, document.getElementById("A1timemarkTsecsInput").value),
          gettimevalue(document.getElementById("B1timemarkTminsInput").value, document.getElementById("B1timemarkTsecsInput").value),
          gettimevalue(document.getElementById("C1timemarkTminsInput").value, document.getElementById("C1timemarkTsecsInput").value),
          gettimevalue(document.getElementById("D1timemarkTminsInput").value, document.getElementById("D1timemarkTsecsInput").value),
          gettimevalue(document.getElementById("E1timemarkTminsInput").value, document.getElementById("E1timemarkTsecsInput").value),
          gettimevalue(document.getElementById("K1timemarkIminsInput").value, document.getElementById("K1timemarkIsecsInput").value),
          gettimevalue(document.getElementById("K1timemarkTminsInput").value, document.getElementById("K1timemarkTsecsInput").value)

        );

        var modval = x % 60;

        return (x - modval + 60);



      }

      function graphprep() {


        //start

        var maxtimeval = findmaxtimeval();
        if (maxtimeval == null) {

          alert("internal error: max time not calculated");

          maxtimeval = 300;
        }

        var keyprobtime = gettimevalue(document.getElementById("K1timemarkIminsInput").value, document.getElementById("K1timemarkIsecsInput").value); // Value of where the line will appear
        if (keyprobtime == 0) {

          keyprobtime = null;
        }


        var keyrxtime = gettimevalue(document.getElementById("K1timemarkTminsInput").value, document.getElementById("K1timemarkTsecsInput").value); // Value of where the line will appear
        if (keyrxtime == 0) {

          keyrxtime = null;
        }

        var identtime = " ("+document.getElementById("K1timemarkIminsInput").value+"m "+ document.getElementById("K1timemarkIsecsInput").value+"s"+")";

        var ttime = " ("+document.getElementById("K1timemarkTminsInput").value+"m "+ document.getElementById("K1timemarkTsecsInput").value+"s"+")";


          
        var container_chartFreqAtaTailNum = new Highcharts.Chart({


          chart:

          {

            events: {
              load: function() {




                var label = this.renderer.label("A: " + $("#AirWaySetup").val())
                  .css({
                    width: 400,
                    height: 100,
                    color: 'black',
                    fontSize: '12px'
                  })
                  .attr({
                    'stroke': 'silver',
                    'stroke-width': 2,
                    'r': 5,
                    'padding': 5
                  })
                  .add();

                label.align(Highcharts.extend(label.getBBox(), {
                  align: 'bottom',
                  x: 0, // offset
                  verticalAlign: 'bottom',
                  y: label.getBBox().height, // offset
                }), null, 'spacingBox');

                var labelB = this.renderer.label("B: " + $("#BSetup").val())
                  .css({
                    width: 400,
                    height: 100,
                    color: 'black',
                    fontSize: '12px'
                  })
                  .attr({
                    'stroke': 'silver',
                    'stroke-width': 2,
                    'r': 5,
                    'padding': 5
                  })
                  .add();

                labelB.align(Highcharts.extend(label.getBBox(), {
                  align: 'bottom',
                  x: label.getBBox().width, // offset
                  verticalAlign: 'bottom',
                  y: label.getBBox().height, // offset
                }), null, 'spacingBox');

                var labelC = this.renderer.label("C: " + $("#CSetup").val())
                  .css({
                    width: 400,
                    height: 100,
                    color: 'black',
                    fontSize: '12px'
                  })
                  .attr({
                    'stroke': 'silver',
                    'stroke-width': 2,
                    'r': 5,
                    'padding': 5
                  })
                  .add();

                labelC.align(Highcharts.extend(label.getBBox(), {
                  align: 'bottom',
                  x: 0, // offset
                  verticalAlign: 'bottom',
                  y: label.getBBox().height * 2, // offset
                }), null, 'spacingBox');

                var labelD = this.renderer.label("D: " + $("#DSetup").val())
                  .css({
                    width: 400,
                    height: 100,
                    color: 'black',
                    fontSize: '12px'
                  })
                  .attr({
                    'stroke': 'silver',
                    'stroke-width': 2,
                    'r': 5,
                    'padding': 5
                  })
                  .add();

                labelD.align(Highcharts.extend(label.getBBox(), {
                  align: 'bottom',
                  x: labelC.getBBox().width, // offset
                  verticalAlign: 'bottom',
                  y: label.getBBox().height * 2, // offset
                }), null, 'spacingBox');


                var labelE = this.renderer.label("E: " + $("#ESetup").val())
                  .css({
                    width: 400,
                    height: 100,
                    color: 'black',
                    fontSize: '12px'
                  })
                  .attr({
                    'stroke': 'silver',
                    'stroke-width': 2,
                    'r': 5,
                    'padding': 5
                  })
                  .add();

                labelE.align(Highcharts.extend(label.getBBox(), {
                  align: 'bottom',
                  x: labelC.getBBox().width + labelD.getBBox().width, // offset
                  verticalAlign: 'bottom',
                  y: label.getBBox().height * 2, // offset
                }), null, 'spacingBox');

                var labelKP = this.renderer.label("Key Problem: " + $("#KPSetup").val())
                  .css({
                    width: 400,
                    height: 100,
                    color: 'black',
                    fontSize: '12px'
                  })
                  .attr({
                    'stroke': 'silver',
                    'stroke-width': 2,
                    'r': 5,
                    'padding': 5
                  })
                  .add();

                labelKP.align(Highcharts.extend(label.getBBox(), {
                  align: 'bottom',
                  x: 0, // offset
                  verticalAlign: 'bottom',
                  y: label.getBBox().height * 2 + labelC.getBBox().height // offset
                }), null, 'spacingBox');

                var labelKT = this.renderer.label("Definitive Treatment: " + $("#KTSetup").val())
                  .css({
                    width: 400,
                    height: 100,
                    color: 'black',
                    fontSize: '12px'
                  })
                  .attr({
                    'stroke': 'silver',
                    'stroke-width': 2,
                    'r': 5,
                    'padding': 5
                  })
                  .add();

                labelKT.align(Highcharts.extend(label.getBBox(), {
                  align: 'bottom',
                  x: labelKP.getBBox().width, // offset
                  verticalAlign: 'bottom',
                  y: label.getBBox().height * 2 + labelC.getBBox().height // offset// offset
                }), null, 'spacingBox');







              }


            },

            spacingBottom: 100,
            type: 'columnrange',
            inverted: true,


            renderTo: 'container'
          },

          tooltip: {
            enabled: false
          },
          credits: {
            enabled: false

          },



          title: {
            text: 'Simulation Feedback'
          },



          subtitle: {
            text: ''
          },

          xAxis: {
            categories: ['A', 'B', 'C', 'D', 'E']
          },

          scrollbar: {
            enabled: false
          },

          yAxis: {


            plotLines: [{
                useHTML: true,
                color: 'red', // Color value
                label: {
                  text: 'main problem identified'+identtime,
                  verticalAlign: 'top',
                  rotation: 0


                },

                value: keyprobtime,
                width: 2 // Width of the line
              },

              {
                color: 'blue', // Color value
                label: {
                  text: 'key rx'+ttime,
                  verticalAlign: 'bottom',
                  rotation: 0
                },

                value: keyrxtime, // Value of where the line will appear
                width: 2 // Width of the line
              }
            ],

            min: 0,
            max: maxtimeval,
            tickInterval: 60,

            title: {
              text: 'Time (min)'
            },
            labels: {
              formatter: function() {


                return Math.floor(this.value / 60) + 'm';
              }

            },





          },



          plotOptions: {



            columnrange: {

              grouping: true,
              maxPointWidth: 100,
              borderColor: 'black',

              dataLabels: {



                enabled: true,

                align: 'top',




                formatter: function() {
                  var labelstring = '';
                  var minval = 0;
                  var minval = Math.floor(this.y / 60);

                  if (minval != 0) {
                    var labelstring = minval + 'm ';
                  }
                  labelstring = labelstring + this.y % 60 + 's';

                  return labelstring;
                }
              }






            }
          },

          legend: {
            enabled: true,
            align: 'right'
          },

          series: [{
              name: 'From problem occurence to identification',
              enabled: false,

              data: [
                [gettimevalue(document.getElementById("A1timemarkIminsInput").value, document.getElementById("A1timemarkIsecsInput").value),
                  gettimevalue(document.getElementById("A1timemarkOminsInput").value, document.getElementById("A1timemarkOsecsInput").value)
                ],
                [gettimevalue(document.getElementById("B1timemarkIminsInput").value, document.getElementById("B1timemarkIsecsInput").value),
                  gettimevalue(document.getElementById("B1timemarkOminsInput").value, document.getElementById("B1timemarkOsecsInput").value)
                ],
                [gettimevalue(document.getElementById("C1timemarkIminsInput").value, document.getElementById("C1timemarkIsecsInput").value),
                  gettimevalue(document.getElementById("C1timemarkOminsInput").value, document.getElementById("C1timemarkOsecsInput").value)
                ],
                [gettimevalue(document.getElementById("D1timemarkIminsInput").value, document.getElementById("D1timemarkIsecsInput").value),
                  gettimevalue(document.getElementById("D1timemarkOminsInput").value, document.getElementById("D1timemarkOsecsInput").value)
                ],
                [gettimevalue(document.getElementById("E1timemarkIminsInput").value, document.getElementById("E1timemarkIsecsInput").value),
                  gettimevalue(document.getElementById("E1timemarkOminsInput").value, document.getElementById("E1timemarkOsecsInput").value)
                ]

              ],

              dataLabels: {
                enabled: true,
                xLow: -10,
                xHigh: 20,


              },

              color: 'red'

            },

            {
              name: 'From problem occurence to treatment',

              data: [
                [gettimevalue(document.getElementById("A1timemarkIminsInput").value, document.getElementById("A1timemarkIsecsInput").value),
                  gettimevalue(document.getElementById("A1timemarkTminsInput").value, document.getElementById("A1timemarkTsecsInput").value)
                ],

                [gettimevalue(document.getElementById("B1timemarkIminsInput").value, document.getElementById("B1timemarkIsecsInput").value),
                  gettimevalue(document.getElementById("B1timemarkTminsInput").value, document.getElementById("B1timemarkTsecsInput").value)
                ],

                [gettimevalue(document.getElementById("C1timemarkIminsInput").value, document.getElementById("C1timemarkIsecsInput").value),
                  gettimevalue(document.getElementById("C1timemarkTminsInput").value, document.getElementById("C1timemarkTsecsInput").value)
                ],

                [gettimevalue(document.getElementById("D1timemarkIminsInput").value, document.getElementById("D1timemarkIsecsInput").value),
                  gettimevalue(document.getElementById("D1timemarkTminsInput").value, document.getElementById("D1timemarkTsecsInput").value)
                ],

                [gettimevalue(document.getElementById("E1timemarkIminsInput").value, document.getElementById("E1timemarkIsecsInput").value),
                  gettimevalue(document.getElementById("E1timemarkTminsInput").value, document.getElementById("E1timemarkTsecsInput").value)
                ]


              ],


              dataLabels: {
                enabled: true,
                xLow: -10,
                xHigh: 20,



              },

              color: 'blue'
            }



          ]


          //dil
        });

        //end





      }
    </script>


    <div data-role="header" data-position="fixed" data-theme="b">
      <a href="#pageone" class="ui-btn" id="returnToSim">Return to simulation</a>
    </div>

    <div data-role="main" class="ui-content">


      <div id="container" style="width: 80%; height:75%"></div>


    </div>




  </div>


  <div data-role="page" id="setUpMenu" class="ui-corner-all" data-theme="b">
    <div data-role="header" data-position="fixed" data-theme="b">
      <a href="#pageone" class="ui-btn" id="returnToSim">Return to simulation</a>
    </div>

    <div data-role="main" class="ui-content">

      <div style="padding:10px 20px;">
        <h3>Setup simulation labels</h3>
        <div class="ui-field-contain">
          <label for="AirWaySetup">A</label>
          <input type="text" name="AirWaySetup" id="AirWaySetup" value="Airway Task" placeholder="Airway Task" />
        </div>

        <div class="ui-field-contain">
          <label for="BSetup">B</label>
          <input type="text" name="BSetup" id="BSetup" value="Breathing Task" placeholder="Breathing Task" />
        </div>

        <div class="ui-field-contain">
          <label for="CSetup">C</label>
          <input type="text" name="CSetup" id="CSetup" value="C Task" placeholder="C Task" />
        </div>

        <div class="ui-field-contain">
          <label for="DSetup">D</label>
          <input type="text" name="DSetup" id="DSetup" value="D Task" placeholder="D Task" />
        </div>

        <div class="ui-field-contain">
          <label for="ESetup">E</label>
          <input type="text" name="ESetup" id="ESetup" value="E Task" placeholder="E Task" />
        </div>

        <div class="ui-field-contain">
          <label for="KPsetup">Key Problem Identified</label>
          <input type="text" name="KPSetup" id="KPSetup" value="Key Problem" placeholder="Key Problem" />
        </div>

        <div class="ui-field-contain">
          <label for="KTsetup">Key Treatment</label>
          <input type="text" name="KTSetup" id="KTSetup" value="Key Treatment" placeholder="Key Treatment" />
        </div>



      </div>

    </div>

  </div>



</body>

</html>
